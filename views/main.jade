script
	var socket;
	function updateHero(hero) {
			jx.id('level').innerHTML = hero.level;
			jx.id('exp').innerHTML = hero.exp;
			jx.id('health').innerHTML = hero.health;
			jx.id('attack').innerHTML = hero.attack;
			jx.id('defense').innerHTML = hero.defense;
	}
	jx.ready(function() {
		socket = io.connect('/');
		socket.on('connect', function() {
			// connected
		});
	});

- if (hero)
	h1 Combat
	div(id='hero')
	h2 #{hero.name} (level 
		span(id='level') #{hero.level})
	ul
		li exp : 
			span(id='exp') #{hero.exp}
		li health : 
			span(id='health') #{hero.health}
		li attack : 
			span(id='attack') #{hero.attack}
		li defense : 
			span(id='defense') #{hero.defense}
	div(id='enemies')
		div(class='monster')
			h2 Goblin (level 1)
			ul
				li health : 
					span(id='monster_health') 100
			input(id='attackBtn', type='button', value='Attack')
	input(id='newBtn', type='button', value='New Monster')
	script
		var hero = {
			level :#{hero.level}
			, exp : #{hero.exp}
			, health : #{hero.health}
			, attack : #{hero.attack}
			, defense : #{hero.defense}
		}
		function onclick_attack(){
			var health = this.parentNode.childNodes[1].firstChild.firstChild.nextSibling;
			health.innerHTML = health.innerHTML - 10;
			if( health.innerHTML <= 0 ) {
				jx.id('enemies').removeChild(this.parentNode);
				hero.exp += 10;
				jx.id('exp').innerHTML = hero.exp;
				socket.emit('update hero', hero);
			}
		}
		jx.on('attackBtn', 'click', onclick_attack);
	
		jx.on('newBtn','click', function(){
			var monster = document.createElement('div');
			monster.class = 'monster';
			monster.innerHTML = "<h2>Goblin (level 1)</h2><ul><li>health : <span id='monster_health'>100</span></li></ul>"
				+ "<input id='attackBtn' type='button' value='Attack' />"
			jx.id('enemies').appendChild(monster);
			monster.childNodes[2].addEventListener('click', onclick_attack);
		});
- else
	h1 Hero Creation
	// hero(username, hero.name, attack, defense, health, exp, level)
	form(id='hero')
		label(for='name') name
		input(type='text', id='name', name='name', value='Lea')
		br
		label(for='level') level
		input(type='text', id='level', name='level', value=1)
		br
		label(for='exp') exp 
		input(type='text', id='exp', name='exp', value=0)
		br
		label(for='health') health
		input(type='text', id='health', name='health', value=100)
		br
		label(for='attack') attack
		input(type='text', id='attack', name='attack', value=10)
		br
		label(for='defense') defense
		input(type='text', id='defense', name='defense', value=10)
		br
		input(id='submitBtn', type='button', value='Create')
	script
		jx.on('submitBtn','click', function() {
			var form = jx.id('hero');
			var hero = {
				username:'#{username}'
				, name:form.name.value
				, level:form.level.value
				, exp:form.exp.value
				, health:form.health.value
				, attack:form.attack.value
				, defense:form.defense.value
			}
			socket.emit('new hero', hero);
			socket.on('hero created', function(data) {
				location.reload(true);
			});
		});
		
